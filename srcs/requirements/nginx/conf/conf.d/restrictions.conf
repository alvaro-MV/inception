##
# Global restrictions configuration file
# Designed to be included inside any server {} block.
##

# Silenciar logs de favicon y robots.txt (ruido innecesario)
location = /favicon.ico {
    log_not_found off;
    access_log off;
}

# Bloquear acceso a archivos ocultos (.htaccess, .htpasswd, .DS_Store, etc.)
# Se mantiene el logging para posibles herramientas de seguridad (fail2ban, etc.)
location ~ /\. {
    deny all;
}

# Bloquear ejecución de PHP en directorios de subida de usuarios
# (uploads/, files/), para evitar ejecución de shells maliciosos
location ~* /(?:uploads|files)/.*\.php$ {
    deny all;
}
